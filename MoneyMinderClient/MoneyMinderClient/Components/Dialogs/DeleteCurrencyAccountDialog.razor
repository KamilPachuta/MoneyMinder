@using MoneyMinderClient.Services.Interfaces
@using MoneyMinderContracts.Requests.CurrencyAccounts
@inject ICurrencyAccountService CurrencyAccountService

<MudDialog>
    <DialogContent>
        <MudText Typo="Typo.h6">Do you really want to delete this currency account?</MudText>
        <MudText Typo="Typo.body2" Class="mt-2">This process cannot be undone.</MudText>
    </DialogContent>
    <DialogActions>
        <MudButton Color="Color.Secondary" OnClick="() => MudDialog.Close(DialogResult.Cancel())">Cancel</MudButton>
        <MudButton Color="Color.Error" OnClick="Submit">Delete</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter]
    private IMudDialogInstance MudDialog { get; set; } = default!;

    [Parameter]
    public Guid CurrencyAccountId { get; set; }

    private async Task Submit()
    {
        var request = new DeleteCurrencyAccountRequest(CurrencyAccountId);
        var result = await CurrencyAccountService.DeleteCurrencyAccountAsync(request);

        MudDialog.Close(DialogResult.Ok(result));
    }
}
