@using MoneyMinderContracts.Requests.SavingsAccounts
@inject ISavingsAccountService SavingsService

<MudDialog>
    <DialogContent>
        <MudText Typo="Typo.h6">Do you really want to delete this savings account?</MudText>
        <MudText Typo="Typo.body2" Class="mt-2">This process cannot be undone.</MudText>
    </DialogContent>
    <DialogActions>
        <MudButton Color="Color.Secondary" OnClick="() => MudDialog.Close(DialogResult.Cancel())">Cancel</MudButton>
        <MudButton Color="Color.Error" OnClick="Submit">Delete</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter]
    private IMudDialogInstance MudDialog { get; set; } = default!;

    [Parameter]
    public Guid SavingsAccountId { get; set; }

    private async Task Submit()
    {
        var request = new DeleteSavingsAccountRequest(SavingsAccountId);
        var result = await SavingsService.DeleteSavingsAccountAsync(request);

        MudDialog.Close(DialogResult.Ok(result));
    }
}